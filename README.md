# ChalkboardEducationV2

This project is splited in two directories:

- `/back` : Symfony app backend
- `/front` : React / Apollo Graphql / webpack app frontend

## Front

### Requirements

You can install Yarn through the Homebrew package manager. This will also install Node.js if it is not already installed.

    $ brew install yarn

### Setup

``` bash
$ cd front

# install dependencies
$ yarn install

# serve with hot reload at localhost:3000
$ yarn start

# build for production with minification
$ yarn build

# run tests
$ yarn test
```

You should access the front via http://localhost:3000/

To login as a user:

http://localhost:3000/login/api-key-token-user-1

## Back

> Note: The `$` stands for your machine CLI, while the `⇒` stands for the VM CLI

    $ cd back

And consult the [README.md](back/README.md) for the back to setup the environment

## Run a demo from localhost

In the VM, run :

        ⇒ ngrok http 80

Take the subdomain generated by ngrok and set the value of scheme and domain in app/config/parameters.yml:

        parameters:
            scheme: https
            domain: generated-sub-domain-by-ngrok.ngrok.io

Then run:

        ⇒ console cache:clear --env=prod

On Front, edit the file /front/src/config/index.js and set the subdomain generated by ngrok in the production api endpoint:

      production: {
        api: {
          endpoint: 'https://generated-sub-domain-by-ngrok.ngrok.io/api/graphql/'
        },

Then run:

    $ yarn build

Install local-web-server https://www.npmjs.com/package/local-web-server
Then in /front/build directory, run:

    $ ws --spa index.html

It will serve the front at http://127.0.0.1:8000
Run ngrok on this port:

    $ ngrok http 8000

It will give you the ngrok subdomain for the front.
